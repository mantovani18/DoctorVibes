<!doctype html>
<html lang="pt-BR">
<head>
		<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
		<title>DoctorFast - Triagem Rápida</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<div id="entryOverlay" class="entry-overlay">
		<div class="entry-box">
			<h2>Entrar no DoctorFast</h2>
			<form id="entryForm">
				<label>Entrar como</label>
				<select id="entryRole">
					<option value="paciente">Paciente</option>
					<option value="medico">Médico</option>
					<option value="moderador">Moderador</option>
				</select>

				<div class="entry-field entry-field-name">
					<label>Nome (Paciente)</label>
					<input id="entryName" placeholder="Seu nome" />
				</div>

				<div class="entry-field entry-field-creds">
					<label>ID</label>
					<input id="entryId" placeholder="ID do usuário" />

					<label>Senha</label>
					<input id="entryPass" placeholder="Senha" type="password" />
				</div>

				<div style="margin-top:12px">
					<button type="submit">Entrar</button>
				</div>
			</form>
		</div>
	</div>
	<header class="top">
				<div style="display:flex;align-items:center;gap:10px;">
					<img src="Logo.png" alt="DoctorFast" style="height:64px;width:64px;object-fit:cover;border-radius:999px;" />
					<h1 style="margin:0">DoctorFast</h1>
				</div>
		<div class="role-row">
			<button id="switchUser" class="muted">Trocar perfil</button>
			<button id="editModerator" class="muted" style="display:none;margin-left:8px;">Editar perfil</button>
				<button id="commsBtn" class="muted" style="display:none;margin-left:8px;">Comunicação <span id="commsBadge" style="display:inline-block;background:#e53e3e;color:#fff;border-radius:999px;padding:2px 6px;font-size:12px;margin-left:6px;vertical-align:middle;display:none;">0</span></button>
			<button id="editDoctorBtn" class="muted" style="display:none;margin-left:8px;">Editar perfil (Médico)</button>
			<button id="toggleAvailBtn" class="muted" style="display:none;margin-left:8px;">Indisponível</button>
		</div>
	</header>

	<main>
		<section id="patientSection" class="hidden">
			<h2>Abrir consulta (Paciente)</h2>
			<form id="patientForm">
				<label>Nome</label>
				<input id="p_name" required />

				<label>Contato (telefone/email)</label>
				<input id="p_contact" />

				<label>O que você está sentindo?</label>
				<textarea id="p_what" required></textarea>

				<label>Sintomas (breve)</label>
				<input id="p_symptoms" />

				<label>Duração</label>
				<input id="p_duration" placeholder="Ex: 2 dias" />

				<label>Gravidade</label>
				<select id="p_severity">
					<option value="leve">Leve</option>
					<option value="moderado">Moderado</option>
					<option value="grave">Grave</option>
				</select>

				<label>Especialidade desejada (opcional)</label>
				<select id="p_specialty">
					<option value="">Clinico Geral</option>
					<!-- opções preenchidas dinamicamente -->
				</select>

				<button type="submit">Abrir Consulta</button>
			</form>

			<div class="hint">
				Enquanto aguarda, suas respostas ficarão visíveis ao médico para agilizar o atendimento.
			</div>

					<div class="doctors-area">
						<h3>Médicos disponíveis</h3>
						<div class="doctor-search">
							<input id="doctorSearch" placeholder="Pesquisar por nome ou especialidade" />
						</div>
						<div id="doctorList"></div>
					</div>
		</section>

		<section id="doctorSection" class="hidden">
			<h2>Fila de Espera (Médico)</h2>
				
			</div>
			<div id="queueList"></div>
		</section>


		<section id="moderatorSection" class="hidden">
			<h2>Painel do Moderador</h2>
				<div class="moderator-grid">
					<div>
						<h3>Gerenciar Consultas</h3>
						<div id="moderatorList"></div>
					</div>
					<div>
						<h3>Gerenciar Médicos</h3>
						<form id="doctorForm">
							<label>Nome do Médico</label>
							<input id="d_name" required />

							<label>Especialidade</label>
							<input id="d_specialty" />

							<label>Contato</label>
							<input id="d_contact" />

							<label>ID do Médico (login)</label>
							<input id="d_id" placeholder="id_doctor" />

							<label>Senha (login)</label>
							<input id="d_password" type="password" />

							<label>Breve bio / observação</label>
							<textarea id="d_bio"></textarea>

							<div style="display:flex;gap:8px;justify-content:flex-end;align-items:center;margin-top:8px;">
								<button type="button" id="doctorFormCancel" style="background:transparent;border:0;font-size:18px;cursor:pointer;">✕</button>
								<button type="submit">Adicionar Médico</button>
							</div>
						</form>

						<div id="moderatorDoctorsList" style="margin-top:12px"></div>

						<hr />
						<!-- moderator profile moved to modal; opened via 'Editar perfil' button -->
					</div>
				</div>
		</section>
	</main>

	<!-- Moderator profile modal (hidden until 'Editar perfil' is clicked) -->
	<div id="moderatorModal" style="display:none;position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;z-index:40;">
		<div style="background:#fff;padding:18px;border-radius:8px;max-width:520px;width:92%;box-shadow:0 6px 24px rgba(0,0,0,.25);position:relative;">
			<button id="moderatorClose" style="position:absolute;right:12px;top:12px;background:transparent;border:0;font-size:18px;cursor:pointer;">✕</button>
			<h3>Editar perfil do Moderador</h3>
			<form id="moderatorProfile">
				<label>Foto de perfil</label>
				<img id="mod_avatar_preview" src="" alt="avatar" style="width:72px;height:72px;border-radius:999px;display:block;margin-bottom:8px;object-fit:cover" />
				<input id="mod_avatar_input" type="file" accept="image/*" />

				<label>Nome de exibição</label>
				<input id="mod_display_name" placeholder="Nome mostrado no painel" />

				<label>Nova senha</label>
				<input id="mod_new_pass" type="password" placeholder="Nova senha do moderador" />

				<div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end;">
					<button type="button" id="moderatorCancel" style="background:#0b69ff;color:#fff;padding:8px 12px;border-radius:6px;">Cancelar</button>
					<button type="submit" style="background:#0b69ff;color:#fff;padding:8px 12px;border-radius:6px;">Salvar</button>
				</div>
			</form>
		</div>
	</div>

		<!-- Doctor profile modal (hidden until 'Editar perfil (Médico)' is clicked) -->
		<div id="doctorModal" style="display:none;position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;z-index:41;">
			<div style="background:#fff;padding:18px;border-radius:8px;max-width:520px;width:92%;box-shadow:0 6px 24px rgba(0,0,0,.25);position:relative;">
				<button id="doctorModalClose" style="position:absolute;right:12px;top:12px;background:transparent;border:0;font-size:18px;cursor:pointer;">✕</button>
				<h3>Alterar perfil (Médico)</h3>
				<form id="doctorProfile">
					<label>Foto de perfil</label>
					<img id="doctorAvatarPreview" src="" alt="avatar" style="width:96px;height:96px;border-radius:999px;display:block;margin-bottom:8px;object-fit:cover" />
					<input id="doctorAvatarInput" type="file" accept="image/*" />
					<div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end;">
						<button type="button" id="doctorModalCancel" style="background:#eee;border:0;padding:8px 12px;border-radius:6px;">Cancelar</button>
						<button id="saveAvatar" type="button" style="background:#0b69ff;color:#fff;border:0;padding:8px 12px;border-radius:6px;">Salvar Foto</button>
					</div>
				</form>
			</div>
		</div>

	<!-- Communications modal: chat general and messages to moderator (hidden until opened) -->
	<div id="commsModal" style="display:none;position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;z-index:45;">
		<div style="background:#fff;padding:12px;border-radius:8px;max-width:720px;width:96%;height:80vh;display:flex;flex-direction:column;">
			<button id="commsClose" style="position:absolute;right:12px;top:12px;background:transparent;border:0;font-size:18px;cursor:pointer;">✕</button>
			<h3>Comunicação</h3>
			<div style="font-size:13px;color:#666;margin-bottom:8px">Escolha destinatário e envie mensagens. 'Geral' é visível para moderador e todos os médicos. 'Moderador' é uma conversa direcionada ao moderador.</div>
			<div id="commsMessages" style="flex:1;overflow:auto;border:1px solid #eee;padding:8px;border-radius:6px;background:#fafafa;margin-bottom:8px;"></div>
			<div style="display:flex;gap:8px;align-items:center">
				<select id="commsTo" style="padding:6px 8px;border-radius:6px;border:1px solid #ccc;min-width:140px;max-width:220px;font-size:13px;">
					<option value="">Escolha destinatário</option>
				</select>
				<!-- larger textarea so user can see what they're typing -->
				<textarea id="commsInput" rows="6" placeholder="Escreva uma mensagem" style="flex:1;padding:10px;border-radius:6px;border:1px solid #ccc;resize:vertical;min-height:120px;font-size:14px;line-height:1.3;"></textarea>
				<button id="commsSend" style="padding:8px 12px;border-radius:6px;background:#0b69ff;color:#fff;border:0;">Enviar</button>
			</div>
		</div>
	</div>

	<template id="cardTpl">
		<article class="card">
			<header>
				<strong class="c-name"></strong>
				<span class="c-status"></span>
			</header>
			<div class="c-meta"></div>
			<div class="c-answers"></div>
			<div class="c-actions"></div>
		</article>
	</template>

		<template id="doctorTpl">
			<article class="doctor-card">
				<img class="d-avatar" src="" alt="avatar" style="width:48px;height:48px;border-radius:999px;object-fit:cover;margin-bottom:8px;" />
				<header>
					<strong class="d-name"></strong>
					<span class="d-specialty"></span>
					<span class="d-available" style="margin-left:8px;font-size:12px;color:#fff;padding:4px 8px;border-radius:999px;display:inline-block;background:#10b981;">Disponível</span>
				</header>
				<div class="d-contact"></div>
				<div class="d-bio"></div>
				<div class="d-actions"></div>
			</article>
		</template>

	<script src="app.js"></script>
</body>
</html>
